<div class="cart">
  <h2>Cart</h2>

  <!-- Error message -->
  <div *ngIf="error" class="error">{{ error }}</div>

  <!-- Loading state -->
  <div *ngIf="loading">Loading...</div>

  <!-- Cart Items -->
  <div *ngIf="(cartItems$ | async) as cartItems; else emptyCart">
    <div *ngIf="cartItems?.length; else emptyCart" class="cart-items">
      <div class="cart-item" *ngFor="let item of cartItems">
        <img [src]="item.product.image" alt="{{ item.product.title }}" />
        <h3>{{ item.product.title }}</h3>
        <p>Price: ${{ item.product.price }}</p>
        <p>{{ item.product.description }}</p>
        <label>
          Quantity:
          <input
            type="number"
            [(ngModel)]="item.quantity"
            (change)="updateQuantity(item.product.id, item.quantity)"
          />
        </label>
        <button type="button" (click)="deleteItem(item.product.id)">Delete Cart</button>
        <button type="button" (click)="incrementQuantity(item.product.id)">
          Increment Quantity
        </button>
    </div>
    <p class="total-price">Total Price: ${{ totalPrice }}</p>
    <button type="button" class="clear-cart-btn" (click)="clearCart()">Clear Cart</button>
    <a routerLink="/checkout" class="button">Proceed to Checkout</a>
  </div>

  <!-- Empty Cart Template -->
  <ng-template #emptyCart>
    <p>Your cart is empty.</p>
    <a routerLink="/checkout" class="link"> Checkout</a>
  </ng-template>
</div>
