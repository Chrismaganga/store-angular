<div class="checkout-container">
  <div class="checkout-header">
    <h2>Checkout</h2>
  </div>

  <div *ngIf="error" class="error-message">
    {{ error }}
  </div>

  <form [formGroup]="checkoutForm" (ngSubmit)="onSubmit()" class="checkout-form">
    <div class="form-sections">
      <!-- Personal Information -->
      <div class="form-section" formGroupName="personalInfo">
        <div class="section-header">
          <div class="section-icon">ðŸ‘¤</div>
          <h3>Personal Information</h3>
        </div>
        <div class="form-group">
          <label for="firstName">First Name</label>
          <input 
            id="firstName"
            type="text"
            class="form-control"
            formControlName="firstName"
            [class.ng-invalid]="checkoutForm.get('personalInfo.firstName')?.invalid && checkoutForm.get('personalInfo.firstName')?.touched">
          <div class="error-message" *ngIf="checkoutForm.get('personalInfo.firstName')?.invalid && checkoutForm.get('personalInfo.firstName')?.touched">
            Please enter your first name
          </div>
        </div>
        <div class="form-group">
          <label for="lastName">Last Name</label>
          <input 
            id="lastName"
            type="text"
            class="form-control"
            formControlName="lastName"
            [class.ng-invalid]="checkoutForm.get('personalInfo.lastName')?.invalid && checkoutForm.get('personalInfo.lastName')?.touched">
          <div class="error-message" *ngIf="checkoutForm.get('personalInfo.lastName')?.invalid && checkoutForm.get('personalInfo.lastName')?.touched">
            Please enter your last name
          </div>
        </div>
        <div class="form-group">
          <label for="email">Email</label>
          <input 
            id="email"
            type="email"
            class="form-control"
            formControlName="email"
            [class.ng-invalid]="checkoutForm.get('personalInfo.email')?.invalid && checkoutForm.get('personalInfo.email')?.touched">
          <div class="error-message" *ngIf="checkoutForm.get('personalInfo.email')?.invalid && checkoutForm.get('personalInfo.email')?.touched">
            Please enter a valid email address
          </div>
        </div>
      </div>

      <!-- Shipping Address -->
      <div class="form-section" formGroupName="shippingAddress">
        <div class="section-header">
          <div class="section-icon">ðŸ“¦</div>
          <h3>Shipping Address</h3>
        </div>
        <div class="form-group">
          <label for="street">Street Address</label>
          <input 
            id="street"
            type="text"
            class="form-control"
            formControlName="street"
            [class.ng-invalid]="checkoutForm.get('shippingAddress.street')?.invalid && checkoutForm.get('shippingAddress.street')?.touched">
          <div class="error-message" *ngIf="checkoutForm.get('shippingAddress.street')?.invalid && checkoutForm.get('shippingAddress.street')?.touched">
            Please enter your street address
          </div>
        </div>
        <div class="form-group">
          <label for="city">City</label>
          <input 
            id="city"
            type="text"
            class="form-control"
            formControlName="city"
            [class.ng-invalid]="checkoutForm.get('shippingAddress.city')?.invalid && checkoutForm.get('shippingAddress.city')?.touched">
          <div class="error-message" *ngIf="checkoutForm.get('shippingAddress.city')?.invalid && checkoutForm.get('shippingAddress.city')?.touched">
            Please enter your city
          </div>
        </div>
        <div class="form-group">
          <label for="state">State</label>
          <input 
            id="state"
            type="text"
            class="form-control"
            formControlName="state"
            [class.ng-invalid]="checkoutForm.get('shippingAddress.state')?.invalid && checkoutForm.get('shippingAddress.state')?.touched">
          <div class="error-message" *ngIf="checkoutForm.get('shippingAddress.state')?.invalid && checkoutForm.get('shippingAddress.state')?.touched">
            Please enter your state
          </div>
        </div>
        <div class="form-group">
          <label for="zipCode">ZIP Code</label>
          <input 
            id="zipCode"
            type="text"
            class="form-control"
            formControlName="zipCode"
            [class.ng-invalid]="checkoutForm.get('shippingAddress.zipCode')?.invalid && checkoutForm.get('shippingAddress.zipCode')?.touched">
          <div class="error-message" *ngIf="checkoutForm.get('shippingAddress.zipCode')?.invalid && checkoutForm.get('shippingAddress.zipCode')?.touched">
            Please enter a valid ZIP code
          </div>
        </div>
      </div>

      <!-- Payment Information -->
      <div class="form-section" formGroupName="paymentInfo">
        <div class="section-header">
          <div class="section-icon">ðŸ’³</div>
          <h3>Payment Information</h3>
        </div>
        <div class="form-group">
          <label for="cardNumber">Card Number</label>
          <input 
            id="cardNumber"
            type="text"
            class="form-control"
            formControlName="cardNumber"
            [class.ng-invalid]="checkoutForm.get('paymentInfo.cardNumber')?.invalid && checkoutForm.get('paymentInfo.cardNumber')?.touched">
          <div class="error-message" *ngIf="checkoutForm.get('paymentInfo.cardNumber')?.invalid && checkoutForm.get('paymentInfo.cardNumber')?.touched">
            Please enter a valid 16-digit card number
          </div>
        </div>
        <div class="form-group">
          <label for="expiryDate">Expiry Date (MM/YY)</label>
          <input 
            id="expiryDate"
            type="text"
            class="form-control"
            formControlName="expiryDate"
            placeholder="MM/YY"
            [class.ng-invalid]="checkoutForm.get('paymentInfo.expiryDate')?.invalid && checkoutForm.get('paymentInfo.expiryDate')?.touched">
          <div class="error-message" *ngIf="checkoutForm.get('paymentInfo.expiryDate')?.invalid && checkoutForm.get('paymentInfo.expiryDate')?.touched">
            Please enter a valid expiry date (MM/YY)
          </div>
        </div>
        <div class="form-group">
          <label for="cvv">CVV</label>
          <input 
            id="cvv"
            type="text"
            class="form-control"
            formControlName="cvv"
            [class.ng-invalid]="checkoutForm.get('paymentInfo.cvv')?.invalid && checkoutForm.get('paymentInfo.cvv')?.touched">
          <div class="error-message" *ngIf="checkoutForm.get('paymentInfo.cvv')?.invalid && checkoutForm.get('paymentInfo.cvv')?.touched">
            Please enter a valid CVV
          </div>
        </div>
      </div>
    </div>

    <!-- Order Summary -->
    <div class="order-summary">
      <h3>Order Summary</h3>
      <div class="summary-item">
        <span>Subtotal</span>
        <span>${{ totalAmount.toFixed(2) }}</span>
      </div>
      <div class="summary-item">
        <span>Shipping</span>
        <span>FREE</span>
      </div>
      <div class="summary-item">
        <span>Tax</span>
        <span>${{ (totalAmount * 0.1).toFixed(2) }}</span>
      </div>
      <div class="summary-item total">
        <span>Total</span>
        <span>${{ (totalAmount * 1.1).toFixed(2) }}</span>
      </div>

      <button 
        type="submit" 
        class="submit-btn" 
        [disabled]="checkoutForm.invalid || loading">
        <span class="loading-spinner" *ngIf="loading"></span>
        {{ loading ? 'Processing...' : 'Place Order' }}
      </button>
    </div>
  </form>
</div>
